<% if @trips.current_page == 1 %>
	$('#trips-results-container').html('<%= escape_javascript(render("trips")) %>');
	$('#trips-landmark-container').html('<%= escape_javascript(render("trips/partials/landmarks-filtering")) %>');
	
	// if there is the hero unit then remove it and inject in the condensed-searchbar. otherwise, do nothing
	if ($('.big-image-header').length > 0) {
	  $('.big-image-header').slideUp(1000, 'linear', function(){ this.remove(); $('.condensed-search-container').slideDown('slow'); });
	} else {	
	}

<% else %>
	$('#trips-results-container').append('<%= escape_javascript(render("trips")) %>');
<% end %>


try
  {
       FB.XFBML.parse(document.getElementById('<%= "trips_page" + ((params[:page].nil?)? "0": params[:page]) %>'));  // triggering fb xml parse on the newly added trips_page div only
  }catch(ex){}

<% if @trips.next_page %>
 	if ($('.pagination').length == 0) {
		$("#page-pagination-div").append('<%= j will_paginate(@trips) %>');
	} else {
  		$('.pagination').replaceWith('<%= j will_paginate(@trips) %>');
  	}
<% else %>
  $('.pagination').remove();
<% end %>
<% sleep 2 %>


